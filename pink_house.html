<html>
  <head>
    <!-- Loading aframe framework -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-system@1.4.0/dist/aframe-physics-system.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-template-component@^3.1.1/dist/aframe-template-component.min.js"></script> 
    <script src="js/follow.js"></script>
    <!-- Loading threejs framework
    <meta charset="UTF-8" />
    <script type="text/javascript" charset="UTF-8" src="./libs/three/three.js"></script>
    <script type="text/javascript" charset="UTF-8" src="./libs/three/controls/TrackballControls.js"></script>
    <script type="text/javascript" src="./js/01-02.js"></script>
    <link rel="stylesheet" href="./css/default.css"> -->

  </head>

  <body>
    <a-scene physics="friction:0.2; restitution:0.2; debug:false"
    renderer="antialias:true"
    raycaster="far: 100; objects: [link];" 
    cursor="rayOrigin: mouse" 
    camera-position>

  <!-- import objects -->
    <a-assets>


      <a-asset-item 
      id="player" 
      src="objects/playerWalk.gltf"></a-asset-item>
       
      <audio id="bgm" src="audio/Mando.mp3" preload="auto"></audio>

      <a-asset-item 
      id="name" 
      src="objects/name.gltf"></a-asset-item>

      <a-asset-item
        id="painting"
        src="objects/painting.gltf"></a-asset-item>

      <a-asset-item
        id="bed"
        src="objects/bed.gltf"></a-asset-item>
      <a-asset-item
        id="sofa"
        src="objects/sofa.gltf"></a-asset-item>

      <a-asset-item
        id="carpetC"
        src="objects/carpetC.gltf"></a-asset-item>

      <a-asset-item
        id="owl"
        src="objects/owl.gltf"></a-asset-item>

      <a-asset-item
        id="plant"
        src="objects/plant.gltf"></a-asset-item>

      <a-asset-item
        id="shelf"
        src="objects/shelf.gltf"></a-asset-item>
      
      <a-asset-item
        id="lampTable"
        src="objects/lampTabel.gltf"></a-asset-item>

      <a-asset-item
        id="door"
        src="objects/Door.gltf"></a-asset-item>

      <a-asset-item
        id="standMirror"
        src="objects/standMirror.gltf"></a-asset-item>
      
      <a-asset-item
        id="closet"
        src="objects/closet.gltf"></a-asset-item>

      <a-asset-item
        id="standLight"
        src="objects/standLight.gltf"></a-asset-item>

      <a-asset-item
        id="key"
        src="objects/KEY.gltf"></a-asset-item>
        

      <img id="cherry-light" 
        src="https://cdn.glitch.com/9baeb756-4dfe-40ae-a61f-52b72510282b%2Fcherry_light.jpg?v=1603277741102">
      <img id="sky0"
        src="texture/blue-g0876c9fbb_1920.jpg">
      <img id="room1-wall"
        src="texture/pinkwall.jpg">
      <img id="carpet"
        src="texture/360_F_73399559_6z3WIVyR5fPvXAW96ZFG1RBHsz6qVn4R.jpeg">
      <img id="nightsky"
        src="https://cdn.glitch.com/9baeb756-4dfe-40ae-a61f-52b72510282b%2Fnightsky.png?v=1603277760890">
      
      <audio id="ambient" src="audio/ambient-night.mp3" preload="auto"></audio>

      <a-mixin id="room1Wall" 
        geometry="primitive: box" 
        material="src:#room1-wall; repeat:3.2 2; color:#C86CA1" 
        scale="20 13 0.1"></a-mixin>
      
      <a-mixin id="room1DoorWall1" 
        geometry="primitive: box" 
        material="src:#room1-wall; repeat:2.3 2; color:#C86CA1" 
        scale="11 13 0.1"></a-mixin>
      <a-mixin id="room1DoorWall2" 
        geometry="primitive: box" 
        material="src:#room1-wall; repeat:0.8 2; color:#C86CA1" 
        scale="3.5 13 0.1"></a-mixin>
      <a-mixin id="room1DoorWall3" 
        geometry="primitive: box" 
        material="src:#room1-wall; repeat:1.2 0.5; color:#C86CA1" 
        scale="5.5 3 0.1"></a-mixin>
    
        

 </a-assets>


 <a-entity id="ambientSound" sound="src: #ambient; loop: true;"></a-entity>

  <!-- <a-entity mixin="coin" position="7 1 -8"
            follow="target:#avbox; url:gameover.html; speed:1; dist:100">
  </a-entity> -->

  <a-entity rotation="0 0 0" animation="property: rotation; to: 0 360 0; loop: true; dur: 10000">
    <a-sphere position="5 1 -6" color="mediumseagreen"
    follow="target:#avbox; url:gameover.html; speed:1; dist:150"></a-sphere>
</a-entity>


  <a-link href="L22.html"
          link-controls
          title="L22" 
          position="-13 1 -23"
          image="#nightsky"></a-link>
  

  <a-plane position="0 0 -4" rotation="-90 0 0" width="40" height="40" 
            material="src:#cherry-light; repeat: 40 40; color:#9B2565"
            static-body></a-plane>

  <a-plane id="ceiling" position="0 12.8 0" rotation="-90 0 0" width="40" height="40" 
            scale="0.5 0.5 0.7"
            material="color:#FED4E7 transparent:true; opacity:0.5"
            static-body></a-plane>


  
  <a-sky src="#nightsky"></a-sky>



  <a-entity id="painting"
    gltf-model="#painting"
    position="2 -2 -4.4"
    material="color:yellow"
    scale="1 1 1">
  </a-entity>

  <a-entity id="plant"
    gltf-model="#plant"
    position="-10 0 -10.5"
    scale="1.8 1.8 1,8">
  </a-entity>

  <a-entity id="carpet"
    gltf-model="#carpetC"
    position="-6.5 -0.5 -9"
    rotation="0 56.2 0"
    scale="0.6 0.6 0.6">
  </a-entity>

  <a-entity id="lampTable"
    gltf-model="#lampTable"
    position="-1.85 0 -1.5"
    rotation="0 90 0"
    scale="2 2 2">
  </a-entity>

  <a-entity id="sofa"
    dynamic-body="angular-damping:0.99"
    gltf-model="#sofa";
    position="1 0 -3.7"
    rotation="0 20 0"
    scale="1.8 1.8 1.8">
  </a-entity>

  <a-entity id="closet"
    gltf-model="#closet"
    position="6.8 0 7.5"
    rotation="0 90 0"
    scale="3.8 4.3 4">
  </a-entity>

  <a-entity id="shelf"
    gltf-model="#shelf"
    position="-16.5 -0.5 -7.2"
    shadow="receive:false"
    rotation="0 0 0"
    scale="1.75 1.75 1.75">
  </a-entity>

  <a-entity id="bed"
    static-body
    gltf-model="#bed"
    shadow="receive: false"
    position="8.7 0 -1.5"
    rotation="0 90 0"
    scale="1.8 1.8 1.8">
  </a-entity>


  <a-entity id="door"
  gltf-model="#door"
  shadow="receive: false"
  position="-3.7 0 10"
  rotation="0 0 0"
  scale="0.8 0.75 0.9">
</a-entity>

<a-entity id="standLight"
  gltf-model="#standLight"
  position="-10 0 -3"
  rotation="0 0 0"
  scale="4.5 4.5 4.5">
</a-entity>

<a-entity id="standMirror"
  gltf-model="#standMirror"
  position="-9 0 6.5"
  rotation="0 -144 0"
  scale="0.417 2.82 2.82">
</a-entity>

<a-entity id="name"
  gltf-model="#name"
  rotation="0 18 0"
  position="-6.5 1 -4.5"
  scale="1.5 1.5 1.5">
</a-entity>


<a-entity light="type: point; intensity: 2; 
    distance: 20; castShadow: true;color:pink"
    position="0 11 -1">
</a-entity>

<a-entity id="sun" light="type: spot; intensity: 1; 
    distance: 50; castShadow: true;color:#FFFBEF"
    rotation="-95 6.5 0.5"
    position="6.5 22 -4.5">
</a-entity>

  <a-entity id="lampLight" light="type: point; intensity: 1.2; 
                color:#FED4E7; angel: 50;
                penumbra: 0.1; castShadow: true"
            position="-0.3 3.7 -10.5">
</a-entity>

  <a-entity id="spot" light="type: spot; 
                  target: #carpet; color:#FED4E7; angel: 60;
                  penumbra: 0.1; castShadow: true"
            rotation="-80 -40 40"
            position="-8 5.5 -6">
</a-entity>


  <a-entity id="owl"
    position="-9.5 0.8 -5"
    scale="0.7 0.7 0.7"
    animation-mixer="clip:fly"
    gltf-model="#owl"
    rotation="0 -20 0">
  </a-entity>

  <a-entity id="key"
    gltf-model="#key"
    position="0.6 3 -8.8"
    ammo-body="type: dynamic"
    ammo-material="color:red"
    follow="target:#avbox; url:white_house.html; speed:1; dist:5"
    scale="0.3 0.3 0.3"
    animation="property: rotation; dur: 10000;
                       to: 0 360 0; loop: true">
    
    
  </a-entity>


 
 <!-- pink room1 wall -->
 <a-entity mixin="room1Wall" position="10 6.3 0" rotation="0 90 0"></a-entity>
 <a-entity mixin="room1Wall" position="0 6.3 -10"></a-entity>
 <a-entity mixin="room1Wall" position="-10 6.3 0" rotation="0 90 0"></a-entity>
 <a-entity mixin="room1DoorWall1" position="4.5 6.3 10" ></a-entity>
 <a-entity mixin="room1DoorWall2" position="-8.2 6.3 10" ></a-entity>
 <a-entity mixin="room1DoorWall3" position="-3.7 11.3 10" ></a-entity>

 
 <!--  AVATAR with Camera and movement controls -->

<a-entity  id="avbox"
        gltf-model="#player"
        animation-mixer="clip:walk"
        movement-controls="fly:false"
        scale="0.7 0.8 0.7"
        scorekeeper="timeleft:500; winscore:35"
        link-controls
        position="-2 0 6">

<a-entity camera look-controls="pointerLockEnabled:true"
                   position="0 6 -2">
        

<a-entity id="hud"
          health="10"
          score="0"
          text="width:3; value: Pink House!;"
          position="-2 -1 -3"
></a-entity>

<a-box id="avatar"
        static-body
        scale="0.5 4 0.5" position="-2 0 0" 
        material="transparent:true; opacity:0">
</a-box>

<a-circle id="avatar"
          static-body
          radius="0.3" position="0 0 -1" 
          material="color:green; transparent:true; opacity:0.1">
</a-circle>

<a-plane id="avatar"
          static-body
          scale="0.01 0.15" position="0 0 -1" 
          material="color:green; transparent:true; opacity:0.5">
</a-plane>
<a-plane id="avatar"
          static-body
          scale="0.15 0.01" position="0 0 -1" 
          material="color:green; transparent:true; opacity:0.5">
</a-plane>
</a-entity> 
</a-entity>


</a-entity>
<!-- box -->

</a-scene>
</body>
</html>